"""
$Id: oracle_gi_voting 1037 2013-10-13 10:20:02Z tbr $
"""
def inventory_oracle_gridinfra_voting(info):
    inventory = []
    num_votings = 0
    for line in info:
        if line[0] == 'ONLINE':
            num_votings += 1

        if num_votings > 0:
            inventory.append(('Voting', None))
    return inventory

# the check function (dummy)
def check_oracle_gridinfra_voting(item, params, info):
    num_votings_online = 0
    for line in info:
        if line[0] == 'ONLINE':
            num_votings_online += 1
    if num_votings_online in (1,3,5):
        return (0, str(num_votings_online) + ' votings online')
    else:
        return (2, str(num_votings_online) + ' votings online. 1,3 or 5 expected!')

# declare the check to Check_MK
check_info["oracle_gi_voting"] = {
    'check_function':            check_oracle_gridinfra_voting,
    'inventory_function':        inventory_oracle_gridinfra_voting,
    'service_description':       'ORA-GI Voting',
}
